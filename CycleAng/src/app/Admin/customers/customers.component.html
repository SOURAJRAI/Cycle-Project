<div class="customer-container">


  <!-- Top Summary Cards -->
  <div class="summary-cards">
    <div class="summary-card total">
      <h3>Total Customers</h3>
      <p>{{customerCount}}</p>
    </div>
    <div class="summary-card active">
      <h3>Active Customers</h3>
      <p>{{activeCustomer}}</p>
    </div>
    <div class="summary-card inactive">
      <h3>Inactive Customers</h3>
      <p>{{ inactiveCustomer }}</p>
    </div>
    
  </div>
  
  <!-- Search and Add -->
  <div class="customer-header">
    <input type="text" placeholder="Search customers..." class="search-bar" [(ngModel)]="searchTerm" (input)="filterCustomers()">
    <button class="btn-add" (click)="openAddCustomer()"><i class="fa fa-add"></i> Add Customer</button>
  </div>
  
  <!-- Filter Buttons -->
  <div class="filter-buttons">
    <button (click)="filterByStatus('all')" [class.active]="selectedFilter =='all'">All</button>
    <button (click)="filterByStatus('active')"  [class.active]="selectedFilter==='active'">Active</button>
    <button (click)="filterByStatus('inactive')"  [class.active]="selectedFilter==='inactive'">Inactive</button>
  </div>
  
  <!-- Customer Cards -->
  <div class="customer-grid">
    <div class="customer-card" *ngFor="let customer of filteredCustomers">
      <div class="avatar">{{getInitials(customer.firstName,customer.lastName)}}</div>
      <div class="customer-info">
        <h4>{{customer.firstName}} {{customer.lastName}}</h4>
        <p>ğŸ“§ {{customer.email}}</p>
        <p>ğŸ“ {{customer.phoneNumber}}</p>
        <p>ğŸ  {{customer.address}}</p>
        <button 
          [class.active-btn]="customer.status == '1'" 
          [class.inactive-btn]="customer.status == '0'"
          (click)="toggleStatus(customer)">
          {{customer.status == '1' ? 'Active' : 'Inactive'}}
        </button>

        
      </div>
      <div class="customer-actions">
        <button class="edit-btn fa fa-edit" (click)="openAddCustomer(customer)"></button>
        <button class="delete-btn fa fa-trash" (click)="onDeleteClick(customer.customerID)"></button>
      </div>
    </div>
    
    
  </div>
  
</div>

<!-- Confirm Delete Popup -->
<div class="popup-overlay" *ngIf="showConfirmPopup">
  <div class="popup-container confirm-popup">
    <h3>Confirm Delete</h3>
    <p>Are you sure you want to delete this customer?</p>
    <div class="popup-buttons">
      <button class="btn-yes" (click)="confirmDelete(true)">Yes</button>
      <button class="btn-no" (click)="confirmDelete(false)">No</button>
    </div>
  </div>
</div>


<app-add-customer *ngIf="isAddCustomerOpen" (refreshCustomer)="getCustomers()"  [customerData]="selectedCustomer" (close)="closeAddCustomer()" />
